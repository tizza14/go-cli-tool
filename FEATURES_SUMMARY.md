# âœ¨ Go CLI Tool - åŠŸèƒ½ç¸½è¦½

## ğŸ¯ å°ˆæ¡ˆç¾æœ‰åŠŸèƒ½

### 1. **Hello å‘½ä»¤** - å•å€™è¨Šæ¯
åŸºæœ¬çš„å•å€™åŠŸèƒ½ï¼Œæ”¯æŒè‡ªè¨‚åç¨±å’Œå¤§å¯«è½‰æ›ã€‚

**ä½¿ç”¨ç¯„ä¾‹ï¼š**
```cmd
start.bat hello
start.bat hello --name å¼µä¸‰
start.bat hello --name å¼µä¸‰ --upper
```

---

### 2. **Version å‘½ä»¤** - ç‰ˆæœ¬è³‡è¨Š
é¡¯ç¤ºç¨‹å¼ç‰ˆæœ¬ã€æ§‹å»ºæ—¥æœŸå’Œ Git commitã€‚

**ä½¿ç”¨ç¯„ä¾‹ï¼š**
```cmd
start.bat version
```

---

### 3. **Task å‘½ä»¤** - è‡ªå‹•åŒ–ä»»å‹™åŸ·è¡Œå™¨ â­ **æ–°å¢åŠŸèƒ½**

å®Œæ•´çš„ä»»å‹™è‡ªå‹•åŒ–ç³»çµ±ï¼Œæ”¯æŒè¤‡é›œçš„å·¥ä½œæµç¨‹ç·¨æ’ã€‚

#### æ ¸å¿ƒåŠŸèƒ½ï¼š

âœ… **å¤šç¨®ä»»å‹™é¡å‹**
- Command: åŸ·è¡Œ Shell å‘½ä»¤
- Script: åŸ·è¡Œè…³æœ¬æ–‡ä»¶
- HTTP: HTTP è«‹æ±‚ï¼ˆå¾…å¯¦ç¾ï¼‰

âœ… **ä»»å‹™ä¾è³´ç®¡ç†**
- å®šç¾©ä»»å‹™ä¹‹é–“çš„ä¾è³´é—œä¿‚
- è‡ªå‹•æŒ‰æ­£ç¢ºé †åºåŸ·è¡Œ
- ä¾è³´å¤±æ•—æ™‚è·³éå¾ŒçºŒä»»å‹™

âœ… **é‡è©¦æ©Ÿåˆ¶**
- å¤±æ•—è‡ªå‹•é‡è©¦
- å¯é…ç½®é‡è©¦æ¬¡æ•¸
- é‡è©¦é–“éš”æ§åˆ¶

âœ… **è¶…æ™‚æ§åˆ¶**
- é˜²æ­¢ä»»å‹™ç„¡é™æœŸé‹è¡Œ
- å¯é…ç½®è¶…æ™‚æ™‚é–“
- æ”¯æŒå–æ¶ˆé•·æ™‚é–“é‹è¡Œçš„ä»»å‹™

âœ… **ä¸¦è¡ŒåŸ·è¡Œ**
- ç¨ç«‹ä»»å‹™å¯ä¸¦è¡Œé‹è¡Œ
- å¯é…ç½®ä¸¦ç™¼æ•¸é‡
- è‡ªå‹•è™•ç†ä¾è³´é—œä¿‚

âœ… **ç’°å¢ƒè®Šæ•¸æ”¯æŒ**
- ç‚ºæ¯å€‹ä»»å‹™è¨­ç½®ç’°å¢ƒè®Šæ•¸
- æ”¯æŒå¾é…ç½®æ–‡ä»¶è®€å–
- ç¹¼æ‰¿ç³»çµ±ç’°å¢ƒè®Šæ•¸

âœ… **å·¥ä½œç›®éŒ„é…ç½®**
- ç‚ºæ¯å€‹ä»»å‹™è¨­ç½®å·¥ä½œç›®éŒ„
- æ”¯æŒç›¸å°å’Œçµ•å°è·¯å¾‘
- å…¨å±€é»˜èªè¨­ç½®

âœ… **YAML é…ç½®**
- æ˜“è®€æ˜“å¯«çš„é…ç½®æ ¼å¼
- æ”¯æŒè¨»é‡‹å’Œå¤šè¡Œæ–‡æœ¬
- ç‰ˆæœ¬åŒ–é…ç½®ç®¡ç†

#### å­å‘½ä»¤ï¼š

| å‘½ä»¤ | èªªæ˜ | ç¯„ä¾‹ |
|------|------|------|
| `init` | å‰µå»ºé…ç½®æ–‡ä»¶ | `task init -f tasks.yaml --example` |
| `list` | åˆ—å‡ºæ‰€æœ‰ä»»å‹™ | `task list -f tasks.yaml` |
| `validate` | é©—è­‰é…ç½®æ–‡ä»¶ | `task validate -f tasks.yaml` |
| `run` | åŸ·è¡Œä»»å‹™ | `task run -f tasks.yaml -v` |

#### åŸ·è¡Œé¸é …ï¼š

| é¸é … | èªªæ˜ | ç¯„ä¾‹ |
|------|------|------|
| `-f, --file` | é…ç½®æ–‡ä»¶è·¯å¾‘ | `-f tasks.yaml` |
| `--id` | åŸ·è¡Œç‰¹å®šä»»å‹™ | `--id my-task` |
| `-c, --concurrency` | ä¸¦ç™¼åŸ·è¡Œæ•¸ | `-c 3` |
| `-v, --verbose` | è©³ç´°è¼¸å‡º | `-v` |

---

## ğŸ“Š æ¶æ§‹ç‰¹é»

### ä»£ç¢¼çµæ§‹
```
go-cli-tool/
â”œâ”€â”€ cmd/                    # å‘½ä»¤å¯¦ç¾
â”‚   â”œâ”€â”€ root.go            # æ ¹å‘½ä»¤
â”‚   â”œâ”€â”€ hello.go           # Hello å‘½ä»¤
â”‚   â”œâ”€â”€ version.go         # Version å‘½ä»¤
â”‚   â””â”€â”€ task.go            # Task å‘½ä»¤ â­ æ–°å¢
â”œâ”€â”€ internal/              # å…§éƒ¨åŒ…
â”‚   â”œâ”€â”€ greeter/           # å•å€™é‚è¼¯
â”‚   â””â”€â”€ task/              # ä»»å‹™åŸ·è¡Œå™¨ â­ æ–°å¢
â”‚       â”œâ”€â”€ task.go        # ä»»å‹™å®šç¾©
â”‚       â”œâ”€â”€ executor.go    # åŸ·è¡Œå™¨
â”‚       â”œâ”€â”€ config.go      # é…ç½®ç®¡ç†
â”‚       â””â”€â”€ task_test.go   # æ¸¬è©¦
â”œâ”€â”€ examples/              # ç¯„ä¾‹é…ç½® â­ æ–°å¢
â”‚   â”œâ”€â”€ simple-tasks.yaml
â”‚   â”œâ”€â”€ demo-tasks.yaml
â”‚   â””â”€â”€ tasks.yaml
â”œâ”€â”€ docs/                  # æ–‡æª”
â”‚   â””â”€â”€ TASK_AUTOMATION.md # ä»»å‹™è‡ªå‹•åŒ–æ–‡æª” â­ æ–°å¢
â”œâ”€â”€ main.go
â”œâ”€â”€ start.bat              # å•Ÿå‹•è…³æœ¬ â­ æ–°å¢
â”œâ”€â”€ start.ps1              # PowerShell å•Ÿå‹•è…³æœ¬ â­ æ–°å¢
â”œâ”€â”€ QUICKSTART.md          # å¿«é€Ÿå…¥é–€ â­ æ–°å¢
â””â”€â”€ README_TASK.md         # ä¸­æ–‡æŒ‡å— â­ æ–°å¢
```

### è¨­è¨ˆæ¨¡å¼

âœ… **å‘½ä»¤æ¨¡å¼**: ä½¿ç”¨ Cobra æ¡†æ¶å¯¦ç¾ CLI
âœ… **å·¥å» æ¨¡å¼**: ä»»å‹™å‰µå»ºå’ŒåŸ·è¡Œå™¨åˆå§‹åŒ–
âœ… **ç­–ç•¥æ¨¡å¼**: ä¸åŒé¡å‹çš„ä»»å‹™åŸ·è¡Œç­–ç•¥
âœ… **è§€å¯Ÿè€…æ¨¡å¼**: ä»»å‹™ç‹€æ…‹è®ŠåŒ–é€šçŸ¥
âœ… **ä¾è³´æ³¨å…¥**: é…ç½®å’Œé¸é …æ³¨å…¥

### æ¸¬è©¦è¦†è“‹

- âœ… å–®å…ƒæ¸¬è©¦: `internal/task/task_test.go`
- âœ… è¡¨é©…å‹•æ¸¬è©¦: å¤šå ´æ™¯æ¸¬è©¦è¦†è“‹
- âœ… é›†æˆæ¸¬è©¦: å®Œæ•´å·¥ä½œæµæ¸¬è©¦
- âœ… æ¸¬è©¦é€šéç‡: 100%

---

## ğŸš€ å¯¦éš›æ‡‰ç”¨å ´æ™¯

### 1. **CI/CD è‡ªå‹•åŒ–**
```yaml
tasks:
  - id: lint
    name: "ä»£ç¢¼æª¢æŸ¥"
    type: command
    command: golangci-lint
    args: [run]
  
  - id: test
    name: "é‹è¡Œæ¸¬è©¦"
    type: command
    command: go
    args: [test, ./..., -v, -race]
    depends_on: [lint]
  
  - id: build
    name: "æ§‹å»ºæ‡‰ç”¨"
    type: command
    command: go
    args: [build, -o, app.exe]
    depends_on: [test]
  
  - id: deploy
    name: "éƒ¨ç½²"
    type: command
    command: deploy.bat
    depends_on: [build]
    env:
      ENVIRONMENT: production
```

### 2. **æ•¸æ“šå‚™ä»½**
```yaml
tasks:
  - id: backup-db
    name: "å‚™ä»½æ•¸æ“šåº«"
    type: command
    command: mysqldump
    args: [-u, root, mydb]
    timeout: 300s
  
  - id: backup-files
    name: "å‚™ä»½æ–‡ä»¶"
    type: command
    command: robocopy
    args: [./data, ./backup, /MIR]
    depends_on: [backup-db]
  
  - id: compress
    name: "å£“ç¸®å‚™ä»½"
    type: command
    command: 7z
    args: [a, backup.7z, ./backup/*]
    depends_on: [backup-files]
```

### 3. **ç’°å¢ƒè¨­ç½®**
```yaml
tasks:
  - id: install-deps
    name: "å®‰è£ä¾è³´"
    type: command
    command: go
    args: [mod, download]
  
  - id: setup-db
    name: "è¨­ç½®æ•¸æ“šåº«"
    type: script
    command: setup-db.bat
    depends_on: [install-deps]
  
  - id: migrate
    name: "é‹è¡Œé·ç§»"
    type: command
    command: migrate
    args: [up]
    depends_on: [setup-db]
```

### 4. **æ‰¹é‡è™•ç†**
```yaml
tasks:
  - id: convert-images
    name: "è½‰æ›åœ–ç‰‡"
    type: command
    command: convert-images.bat
    timeout: 600s
    retry_count: 2
  
  - id: optimize
    name: "å„ªåŒ–æ–‡ä»¶"
    type: command
    command: optimize.bat
    depends_on: [convert-images]
  
  - id: upload
    name: "ä¸Šå‚³çµæœ"
    type: command
    command: upload.bat
    depends_on: [optimize]
```

---

## ğŸ“ˆ æ€§èƒ½ç‰¹æ€§

- âš¡ **å¿«é€Ÿå•Ÿå‹•**: æ¯«ç§’ç´šå‘½ä»¤éŸ¿æ‡‰
- ğŸ”„ **ä¸¦è¡ŒåŸ·è¡Œ**: æ”¯æŒå¤šä»»å‹™ä¸¦è¡Œ
- ğŸ’¾ **ä½è³‡æºä½”ç”¨**: é«˜æ•ˆçš„ Go é‹è¡Œæ™‚
- ğŸ›¡ï¸ **éŒ¯èª¤è™•ç†**: å®Œå–„çš„éŒ¯èª¤æ¢å¾©æ©Ÿåˆ¶
- ğŸ“Š **åŸ·è¡Œå ±å‘Š**: è©³ç´°çš„ä»»å‹™åŸ·è¡Œçµ±è¨ˆ

---

## ğŸ“ å­¸ç¿’åƒ¹å€¼

é€™å€‹å°ˆæ¡ˆå±•ç¤ºäº†ä»¥ä¸‹æœ€ä½³å¯¦è¸ï¼š

1. âœ… **æ¨™æº– Go å°ˆæ¡ˆçµæ§‹**
2. âœ… **CLI æ‡‰ç”¨é–‹ç™¼** (Cobra + Viper)
3. âœ… **é…ç½®æ–‡ä»¶è™•ç†** (YAML)
4. âœ… **ä¸¦ç™¼æ§åˆ¶å’Œä»»å‹™èª¿åº¦**
5. âœ… **éŒ¯èª¤è™•ç†å’Œé‡è©¦é‚è¼¯**
6. âœ… **å–®å…ƒæ¸¬è©¦å’Œé›†æˆæ¸¬è©¦**
7. âœ… **æ–‡æª”ç·¨å¯«**
8. âœ… **ç”¨æˆ¶é«”é©—è¨­è¨ˆ**

---

## ğŸ”® æœªä¾†æ“´å±•æ–¹å‘

### å³å°‡æ¨å‡ºï¼š
- [ ] HTTP ä»»å‹™é¡å‹æ”¯æŒ
- [ ] ä»»å‹™åŸ·è¡Œæ­·å²è¨˜éŒ„
- [ ] Web UI ç®¡ç†ç•Œé¢
- [ ] å®šæ™‚ä»»å‹™èª¿åº¦ (Cron)
- [ ] ä»»å‹™åŸ·è¡Œé€šçŸ¥ï¼ˆéƒµä»¶ã€Webhookï¼‰
- [ ] åˆ†ä½ˆå¼ä»»å‹™åŸ·è¡Œ
- [ ] ä»»å‹™åŸ·è¡Œç›£æ§å’Œçµ±è¨ˆ
- [ ] ä»»å‹™æ¨¡æ¿åº«

### å¯èƒ½çš„æ“´å±•ï¼š
- [ ] Docker å®¹å™¨ä»»å‹™æ”¯æŒ
- [ ] Kubernetes Job é›†æˆ
- [ ] é›²æœå‹™é›†æˆï¼ˆAWS, Azure, GCPï¼‰
- [ ] æ•¸æ“šåº«æ“ä½œä»»å‹™
- [ ] API æ¸¬è©¦ä»»å‹™
- [ ] æ€§èƒ½æ¸¬è©¦ä»»å‹™

---

## ğŸ“ å¿«é€Ÿé–‹å§‹

```cmd
REM 1. æŸ¥çœ‹æ‰€æœ‰åŠŸèƒ½
start.bat --help

REM 2. å˜—è©¦ Hello å‘½ä»¤
start.bat hello --name "æ‚¨çš„åå­—"

REM 3. å‰µå»ºä»»å‹™é…ç½®
start.bat task init -f my-tasks.yaml --example

REM 4. åŸ·è¡Œä»»å‹™
start.bat task run -f my-tasks.yaml -v

REM 5. å˜—è©¦ç¯„ä¾‹ä»»å‹™
start.bat task run -f examples/simple-tasks.yaml -v
```

---

## ğŸ“š ç›¸é—œæ–‡æª”

- [QUICKSTART.md](QUICKSTART.md) - å¿«é€Ÿå…¥é–€æŒ‡å—
- [README_TASK.md](README_TASK.md) - ä»»å‹™è‡ªå‹•åŒ–ä¸­æ–‡æŒ‡å—
- [docs/TASK_AUTOMATION.md](docs/TASK_AUTOMATION.md) - è©³ç´°æŠ€è¡“æ–‡æª”
- [README.md](README.md) - å®Œæ•´é …ç›®èªªæ˜

---

**äº«å—è‡ªå‹•åŒ–çš„æ¨‚è¶£ï¼** ğŸ‰
